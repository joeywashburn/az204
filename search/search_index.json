{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Azure Deployment Guide","text":"<p>Welcome! \ud83d\udc4b This guide should help you study for AZ-204</p>"},{"location":"#contents","title":"\ud83d\udcc4 Contents","text":"<ol> <li>Develop Azure compute solutions    Implement containerized solutions.</li> </ol>"},{"location":"#getting-started","title":"\ud83d\ude80 Getting Started","text":"<p>To follow along:</p> <ul> <li>Make sure you have an Azure account</li> <li>Install the Azure CLI</li> <li>(Optional) Clone this repo to access all files locally:   ```bash   git clone https://github.com/joeywashburn/az204.git   cd az204   mkdocs serve</li> </ul>"},{"location":"azurecompute25/","title":"Implement containerized solutions","text":"<p>Docker Application to hit the AZ-204 Exam Topics:</p>"},{"location":"azurecompute25/#implement-containerized-solutions_1","title":"Implement containerized solutions","text":"<ul> <li>Create and manage container images for solutions</li> <li>Publish an image to Azure Container Registry</li> <li>Run containers by using Azure Container Instance</li> <li>Create solutions by using Azure Container Apps</li> </ul>"},{"location":"azurecompute25/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker </li> <li>Python Optional</li> <li>Azure Subscription (Free tier or $200 credit recommended for minimal costs)</li> <li>Existing Resource Group</li> </ul>"},{"location":"azurecompute25/#build-the-dockerfile","title":"Build the Dockerfile","text":"<ul> <li>Create a directory for your files</li> </ul> <pre><code>mkdir azurecompute25\ncd azurecompute25\n</code></pre> <ul> <li>Build your Dockerfile</li> </ul> <pre><code>FROM python:3.9-slim\nWORKDIR /app\nCOPY . .\nRUN pip install flask\nEXPOSE 5000\nCMD [\"python\", \"app.py\"]\n</code></pre>"},{"location":"azurecompute25/#create-the-flask-app","title":"Create the Flask App","text":"<ul> <li>In that same directory create a new file called app.py</li> </ul> <pre><code>from flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef hello():\n    return 'Hello from Docker!'\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000)\n</code></pre>"},{"location":"azurecompute25/#build-and-test-docker-locally","title":"Build and Test Docker locally","text":"<pre><code>docker build -t whateveryouwant:1.0 .\n</code></pre> <ul> <li>Run docker run -p 5000:5000 whateveryouwant:1.0.</li> <li>Open http://localhost:5000 in a browser (should show \"Hello from Docker!\").</li> <li>Stop the container with Ctrl+C.</li> </ul>"},{"location":"azurecompute25/#create-a-container-registry","title":"Create a Container Registry","text":"<ul> <li>Create the ACR</li> </ul> <pre><code>az acr create --resource-group az204 --name acryourname --sku Basic\n</code></pre> <ul> <li>Enable Admin</li> </ul> <pre><code>az acr update -n acryourname --admin-enabled true\n</code></pre> <ul> <li>Get you credentials</li> </ul> <pre><code>az acr credential show --name acryourname\n</code></pre>"},{"location":"azurecompute25/#push-the-image-to-acr","title":"Push the Image to ACR","text":"<ul> <li>Log in to ACR:</li> </ul> <pre><code>docker login acryourname.azurecr.io --username &lt;username&gt; --password &lt;password&gt;.\n</code></pre> <ul> <li>Tag the image:</li> </ul> <pre><code>docker tag myapp:1.0 acryourname.azurecr.io/myapp:1.0.\n</code></pre> <ul> <li>Push the image:</li> </ul> <pre><code>docker push acryourname.azurecr.io/myapp:1.0.\n</code></pre> <ul> <li>In the Azure Portal, go to your ACR, click \"Repositories,\" and verify yourapp is there.</li> </ul>"},{"location":"azurecompute25/#deploy-container-to-aci","title":"Deploy container to ACI","text":"<pre><code>az container create `\n  --resource-group az204 `\n  --name az204viacli `\n  --os-type Linux `\n  --cpu 1 `\n  --memory 1 `\n  --image acryourname.azurecr.io/myapp:1.0 `\n  --registry-login-server acryourname.azurecr.io `\n  --registry-username &lt;username&gt; `\n  --registry-password &lt;password&gt; `\n  --ports 5000 `\n  --dns-name-label az204viacli `\n  --location westus3\n  ```\n\n- Test your container\n```powershell\naz container show --resource-group az204 --name az204viacli --query ipAddress.fqdn --output tsv \n</code></pre> <ul> <li>Open http://:5000 in a browser (should show \"Hello from Docker!\"). <li>In the Azure Portal, go to your Container Instance and you will see your Container Instance</li>"},{"location":"azurecompute25/#deploy-to-container-apps-environment","title":"Deploy to Container Apps Environment","text":"<ul> <li>Create the Container Apps Environment</li> </ul> <pre><code>az containerapp env create `\n  --name az204AppEnv `\n  --resource-group az204 `\n  --location westus3\n</code></pre> <ul> <li>Deploy the app</li> </ul> <pre><code>az containerapp create `\n  --name az204containerapp `\n  --resource-group az204 `\n  --environment az204AppEnv `\n  --image acryourname.azurecr.io/myapp:1.0 `\n  --registry-server acryourname.azurecr.io `\n  --registry-username &lt;username&gt; `\n  --registry-password &lt;password&gt; `\n  --target-port 5000 `\n  --ingress external\n</code></pre> <ul> <li>In the Azure Portal, go to your Resource Group and click on your Container App.  Click the URL to make sure you see Hello from Docker!.</li> </ul>"},{"location":"azurecompute25/#clean-up","title":"Clean up","text":"<ul> <li>Optional but recommended</li> <li>Delete all you resources to not go over $200 limit</li> </ul> <pre><code>az group delete -n az204 --no-wait --yes y\n</code></pre>"},{"location":"azurecompute25/#next-steps","title":"Next Steps","text":"<ul> <li>Do everything again, but this time use only the Portal</li> </ul>"}]}